(self.webpackChunkfe_proj=self.webpackChunkfe_proj||[]).push([[922],{89904:function(r,e,t){"use strict";t.r(e),t.d(e,{default:function(){return w}});t(44230);var n=t(1350),u=t(67294),c=t(70884),i=t(91745),o=t(91801),a=t(9690),f=t(51894),l=t(35341),v=t(15325),h=t(28481),s=(t(79753),t(1345));var d=t(72010),g=t.n(d),m=t(34638),E=t.n(m),R=[(0,a.vh)(-.5,-.5,.5,1),(0,a.vh)(-.5,.5,.5,1),(0,a.vh)(.5,.5,.5,1),(0,a.vh)(.5,-.5,.5,1),(0,a.vh)(-.5,-.5,-.5,1),(0,a.vh)(-.5,.5,-.5,1),(0,a.vh)(.5,.5,-.5,1),(0,a.vh)(.5,-.5,-.5,1)],b=[(0,a.vh)(0,0,0,1),(0,a.vh)(1,0,0,1),(0,a.vh)(1,1,0,1),(0,a.vh)(0,1,0,1),(0,a.vh)(0,0,1,1),(0,a.vh)(1,0,1,1),(0,a.vh)(1,1,1,1),(0,a.vh)(0,1,1,1)];function p(r,e){var t,n=[];n[0]=r,n[1]=e;var u=n[0]*n[0]+n[1]*n[1];return u<1?n[2]=Math.sqrt(1-u):(n[2]=0,t=1/Math.sqrt(u),n[0]*=t,n[1]*=t),n}function A(){var r=(0,u.useRef)(null),e=(0,c.Q)(r),t=(0,i.O)(e,g(),E()),n=(0,u.useRef)([]),d=(0,u.useRef)([]),m=(0,u.useRef)((0,f._E)()),A=(0,u.useRef)(null),F=(0,u.useRef)([0,0,1]),T=(0,u.useRef)(0),w=(0,u.useRef)(!1),y=(0,u.useRef)(!1),_=(0,u.useRef)(),x=(0,u.useRef)(),C=(0,u.useRef)(),B=(0,u.useRef)(),L=(0,u.useRef)([0,0,0]),P=(0,u.useCallback)((function(){e&&t&&(e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),y.current&&(F.current=(0,l.Fv)(F.current),m.current=(0,v.BV)(m.current,function(r,e,t,n){Array.isArray(e)||"number"!=typeof t||"number"!=typeof n||(e=[e,t,n]);var u=(0,l.Fv)(e),c=(0,h.Z)(u,3),i=c[0],o=c[1],v=c[2],d=Math.cos((0,s.u)(r)),g=Math.sin((0,s.u)(r)),m=1-d;return(0,f._E)((0,a.vh)(i*i*m+d,i*o*m-v*g,i*v*m+o*g,0),(0,a.vh)(i*o*m+v*g,o*o*m+d,o*v*m-i*g,0),(0,a.vh)(i*v*m-o*g,v*o*m+i*g,v*v*m+d,0),(0,a.vh)())}(T.current,F.current)),e.uniformMatrix4fv(A.current,!1,(0,v.xH)(m.current))),e.drawArrays(e.TRIANGLES,0,n.current.length))}),[e,t]);return(0,u.useEffect)((function(){function r(r,e,t,u){for(var c=[r,e,t,r,t,u],i=0;i<c.length;i+=1)n.current.push(R[c[i]]),d.current.push(b[r])}r(1,0,3,2),r(2,3,7,6),r(3,0,4,7),r(6,5,1,2),r(4,5,6,7),r(5,4,0,1)}),[]),(0,u.useEffect)((function(){r.current&&(r.current.addEventListener("mousedown",(function(e){r.current&&function(r,e){w.current=!0,_.current=r,x.current=e,C.current=r,B.current=e,L.current=p(r,e),y.current=!0}(2*e.clientX/r.current.width-1,2*(r.current.height-e.clientY)/r.current.height-1)})),r.current.addEventListener("mouseup",(function(e){r.current&&function(r,e){w.current=!1,_.current===r&&x.current===e&&(T.current=0,y.current=!1)}(2*e.clientX/r.current.width-1,2*(r.current.height-e.clientY)/r.current.height-1)})),r.current.addEventListener("mousemove",(function(e){r.current&&function(r,e){var t,n,u,c=p(r,e);w.current&&(t=c[0]-L.current[0],n=c[1]-L.current[1],u=c[2]-L.current[2],(t||n||u)&&(T.current=-.1*Math.sqrt(t*t+n*n+u*u),F.current[0]=L.current[1]*c[2]-L.current[2]*c[1],F.current[1]=L.current[2]*c[0]-L.current[0]*c[2],F.current[2]=L.current[0]*c[1]-L.current[1]*c[0],L.current[0]=c[0],L.current[1]=c[1],L.current[2]=c[2]))}(2*e.clientX/r.current.width-1,2*(r.current.height-e.clientY)/r.current.height-1)})))}),[]),(0,u.useEffect)((function(){if(e&&t&&r.current){e.viewport(0,0,r.current.width,r.current.height),e.clearColor(1,1,1,1),e.useProgram(t),e.enable(e.DEPTH_TEST);var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,(0,v.xH)(n.current),e.STATIC_DRAW);var c=e.getAttribLocation(t,"vPosition");e.vertexAttribPointer(c,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(c);var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,(0,v.xH)(d.current),e.STATIC_DRAW);var o=e.getAttribLocation(t,"vColor");e.vertexAttribPointer(o,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(o),A.current=e.getUniformLocation(t,"r"),e.uniformMatrix4fv(A.current,!1,(0,v.xH)(m.current))}}),[e,t]),(0,o.L)(P),u.createElement("div",{style:{padding:"20px"}},u.createElement("canvas",{ref:r,width:512,height:512}))}function F(){var r=(0,u.useRef)(null);return u.createElement("div",{style:{padding:"20px"}},u.createElement("canvas",{ref:r,width:512,height:512}))}var T=n.Z.TabPane;function w(){return u.createElement("div",{style:{padding:"20px"}},u.createElement("h1",null,"Trackball"),u.createElement(n.Z,{tabPosition:"right"},u.createElement(T,{tab:"Trackball",key:"common"},u.createElement(A,null)),u.createElement(T,{tab:"Trackball with quaterion",key:"quaterion"},u.createElement(F,null))))}},35341:function(r,e,t){"use strict";t.d(e,{bA:function(){return n},Fv:function(){return c}});t(79753);function n(r,e){if(!Array.isArray(e))throw new Error("scale(): second parameter ".concat(e," is not a vector"));for(var t=[],n=0;n<e.length;n+=1)t.push(r*e[n]);return t}function u(r){return Math.sqrt(function(r,e){if(r.length!==e.length)throw new Error("dot(): vectors are not the same dimension");for(var t=0,n=0;n<r.length;n+=1)t+=r[n]*e[n];return t}(r,r))}function c(r){var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(e=r.pop());var n=u(r);if(!isFinite(n))throw new Error("normalize(): vector has zero length");for(var c=0;c<r.length;c+=1)r[c]/=n;return t&&void 0!==e&&r.push(e),r}},32564:function(r,e,t){var n=t(82109),u=t(17854),c=t(88113),i=[].slice,o=function(r){return function(e,t){var n=arguments.length>2,u=n?i.call(arguments,2):void 0;return r(n?function(){("function"==typeof e?e:Function(e)).apply(this,u)}:e,t)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(c)},{setTimeout:o(u.setTimeout),setInterval:o(u.setInterval)})},34638:function(r){r.exports="precision highp float;\n\nvarying vec4 fColor;\n\nvoid main() {\n  gl_FragColor = fColor;\n}\n"},72010:function(r){r.exports="attribute vec4 vPosition;\nattribute vec4 vColor;\nvarying vec4 fColor;\n\nuniform mat4 r;\n\nvoid main() {\n  gl_Position = r * vPosition;\n  fColor = vColor;\n}\n"}}]);