(self.webpackChunkfe_proj=self.webpackChunkfe_proj||[]).push([[651],{7592:function(t,e,r){"use strict";r.d(e,{L:function(){return i}});var s=r(67294);function i(t){(0,s.useEffect)((function(){var e=0;return function r(){e=requestAnimationFrame(r),t()}(),function(){cancelAnimationFrame(e)}}),[t])}},66979:function(t,e,r){"use strict";r.d(e,{$:function(){return h}});var s=r(14665),i=r(51814);function n(t,e,r){return(n=(0,i.Z)()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var n=new(Function.bind.apply(t,i));return r&&(0,s.Z)(n,r.prototype),n}).apply(null,arguments)}var a=r(42921),o=(r(24812),r(67294)),l=r(2212);function u(t,e){e&&t.apply(void 0,(0,a.Z)(e))}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cameraConfig,r=t.rendererConfig,s=(0,o.useRef)({}),i=(0,o.useRef)(d("scene",(function(){return new l.xsS}))),h=(0,o.useRef)(d("camera",(function(){return n(l.cPb,(0,a.Z)((null==e?void 0:e.init)||[]))}))),c=(0,o.useRef)(d("renderer",(function(){return new l.CP7})));function d(t,e){if(s.current[t])return s.current[t];var r=e();return s.current[t]=r,r}return(0,o.useEffect)((function(){u(h.current.lookAt.bind(h.current),null==e?void 0:e.lookAt),u(h.current.position.set.bind(h.current.position),null==e?void 0:e.position)}),[null==e?void 0:e.lookAt,null==e?void 0:e.position]),(0,o.useEffect)((function(){u(c.current.setSize.bind(c.current),null==r?void 0:r.size),u(c.current.setClearColor.bind(c.current),null==r?void 0:r.clearColor)}),[null==r?void 0:r.clearColor,null==r?void 0:r.size]),{scene:i,camera:h,renderer:c}}},29651:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return C}});var s=r(67294),i=r(2212),n={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class a{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const o=new i.iKG(-1,1,1,-1,0,1),l=new i.u9r;l.setAttribute("position",new i.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),l.setAttribute("uv",new i.a$l([0,2,0,0,2,0],2));class u{constructor(t){this._mesh=new i.Kj0(l,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,o)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class h extends a{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof i.jyz?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=i.rDY.clone(t.uniforms),this.material=new i.jyz({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new u(this.material)}render(t,e,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}class c extends a{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,r){const s=t.getContext(),i=t.state;let n,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(n=0,a=1):(n=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),i.buffers.stencil.setFunc(s.ALWAYS,n,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(s.EQUAL,1,4294967295),i.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),i.buffers.stencil.setLocked(!0)}}class d extends a{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class f{constructor(t,e){if(this.renderer=t,void 0===e){const r={minFilter:i.wem,magFilter:i.wem,format:i.wk1},s=t.getSize(new i.FM8);this._pixelRatio=t.getPixelRatio(),this._width=s.width,this._height=s.height,(e=new i.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio,r)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===n&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===h&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new h(n),this.clock=new i.SUY}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let r=!1;for(let e=0,s=this.passes.length;e<s;e++){const s=this.passes[e];if(!1!==s.enabled){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(e),s.render(this.renderer,this.writeBuffer,this.readBuffer,t,r),s.needsSwap){if(r){const e=this.renderer.getContext(),r=this.renderer.state.buffers.stencil;r.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),r.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==c&&(s instanceof c?r=!0:s instanceof d&&(r=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new i.FM8);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const r=this._width*this._pixelRatio,s=this._height*this._pixelRatio;this.renderTarget1.setSize(r,s),this.renderTarget2.setSize(r,s);for(let t=0;t<this.passes.length;t++)this.passes[t].setSize(r,s)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}new i.iKG(-1,1,1,-1,0,1);const p=new i.u9r;p.setAttribute("position",new i.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),p.setAttribute("uv",new i.a$l([0,2,0,0,2,0],2));class v extends a{constructor(t,e,r,s,n){super(),this.scene=t,this.camera=e,this.overrideMaterial=r,this.clearColor=s,this.clearAlpha=void 0!==n?n:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new i.Ilk}render(t,e,r){const s=t.autoClear;let i,n;t.autoClear=!1,void 0!==this.overrideMaterial&&(n=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=n),t.autoClear=s}}const m={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tvec4 normal = texture2D (tDisp, p*seed*seed);\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=normal.x*seed_x*(seed/5.);\n\t\t\t\tp.y+=normal.y*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}"};class g extends a{constructor(t=64){super(),void 0===m&&console.error("THREE.GlitchPass relies on DigitalGlitch");const e=m;this.uniforms=i.rDY.clone(e.uniforms),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new i.jyz({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new u(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()}render(t,e,r){this.uniforms.tDiffuse.value=r.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=i.M8C.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=i.M8C.randFloat(-1,1),this.uniforms.seed_y.value=i.M8C.randFloat(-1,1),this.uniforms.distortion_x.value=i.M8C.randFloat(0,1),this.uniforms.distortion_y.value=i.M8C.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=i.M8C.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=i.M8C.randFloat(0,1),this.uniforms.distortion_y.value=i.M8C.randFloat(0,1),this.uniforms.seed_x.value=i.M8C.randFloat(-.3,.3),this.uniforms.seed_y.value=i.M8C.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))}generateTrigger(){this.randX=i.M8C.randInt(120,240)}generateHeightmap(t){const e=new Float32Array(t*t*3),r=t*t;for(let t=0;t<r;t++){const r=i.M8C.randFloat(0,1);e[3*t+0]=r,e[3*t+1]=r,e[3*t+2]=r}return new i.IEO(e,t,t,i.UCm,i.VzW)}}var _=r(66979),x=r(7592),w=[new i.Pa4(-30,0,0),new i.Pa4(-20,10,0),new i.Pa4(-10,0,0),new i.Pa4(0,10,0),new i.Pa4(10,0,0),new i.Pa4(20,10,0),new i.Pa4(30,0,0)];function C(){var t=(0,s.useRef)(null),e=(0,_.$)({cameraConfig:{init:[45,1e3/600,1,500],position:[0,0,100],lookAt:[0,0,0]},rendererConfig:{size:[1e3,600]}}),r=e.scene,n=e.camera,a=e.renderer,o=(0,s.useRef)(new i.nls({color:"#aa0000"})),l=(0,s.useRef)((new i.u9r).setFromPoints(w)),u=(0,s.useRef)(new i.x12(l.current,o.current)),h=(0,s.useRef)(new f(a.current)),c=(0,s.useCallback)((function(){h.current.render()}),[]);return(0,s.useEffect)((function(){var e;r.current.add(u.current),null===(e=t.current)||void 0===e||e.appendChild(a.current.domElement)}),[r,a]),(0,s.useEffect)((function(){var t=new v(r.current,n.current);h.current.addPass(t);var e=new g;h.current.addPass(e)}),[n,r]),(0,x.L)(c),s.createElement("div",null,s.createElement("div",{ref:t}))}},27065:function(t,e,r){"use strict";var s=r(13099),i=r(70111),n=[].slice,a={},o=function(t,e,r){if(!(e in a)){for(var s=[],i=0;i<e;i++)s[i]="a["+i+"]";a[e]=Function("C,a","return new C("+s.join(",")+")")}return a[e](t,r)};t.exports=Function.bind||function(t){var e=s(this),r=n.call(arguments,1),a=function(){var s=r.concat(n.call(arguments));return this instanceof a?o(e,s.length,s):e.apply(t,s)};return i(e.prototype)&&(a.prototype=e.prototype),a}},24812:function(t,e,r){r(82109)({target:"Function",proto:!0},{bind:r(27065)})}}]);